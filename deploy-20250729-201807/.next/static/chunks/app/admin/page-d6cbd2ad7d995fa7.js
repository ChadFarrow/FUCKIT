(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3698],{2895:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var s=r(2115),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(e,t)=>{let r=(0,s.forwardRef)((r,d)=>{let{color:l="currentColor",size:o=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:c="",children:u,...m}=r;return(0,s.createElement)("svg",{ref:d,...a,width:o,height:o,stroke:l,strokeWidth:i?24*Number(n)/Number(o):n,className:["lucide","lucide-".concat(e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim()),c].join(" "),...m},[...t.map(e=>{let[t,r]=e;return(0,s.createElement)(t,r)}),...Array.isArray(u)?u:[u]])});return r.displayName="".concat(e),r}},4304:(e,t,r)=>{"use strict";r.d(t,{ToastContainer:()=>x,o:()=>b});var s=r(5155),a=r(2115),d=r(2895);let l=(0,d.A)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);var o=r(8533);let n=(0,d.A)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),i=(0,d.A)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),c=(0,d.A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),u={success:l,error:o.A,warning:n,info:i},m={success:"bg-green-500",error:"bg-red-500",warning:"bg-yellow-500",info:"bg-blue-500"};function h(e){let{toast:t,onDismiss:r}=e,d=u[t.type];return(0,a.useEffect)(()=>{if(t.duration&&t.duration>0){let e=setTimeout(()=>{r(t.id)},t.duration);return()=>clearTimeout(e)}},[t.id,t.duration,r]),(0,s.jsxs)("div",{className:"flex items-center gap-3 bg-gray-900 text-white p-4 rounded-lg shadow-lg min-w-[300px] max-w-md",children:[(0,s.jsx)("div",{className:"p-1 rounded ".concat(m[t.type]),children:(0,s.jsx)(d,{className:"h-5 w-5"})}),(0,s.jsx)("p",{className:"flex-1 text-sm",children:t.message}),(0,s.jsx)("button",{onClick:()=>r(t.id),className:"text-gray-400 hover:text-white transition-colors",children:(0,s.jsx)(c,{className:"h-4 w-4"})})]})}function x(){let[e,t]=(0,a.useState)([]);(0,a.useEffect)(()=>{let e=e=>{t(t=>[...t,e.detail])};return window.addEventListener("toast",e),()=>window.removeEventListener("toast",e)},[]);let r=e=>{t(t=>t.filter(t=>t.id!==e))};return 0===e.length?null:(0,s.jsx)("div",{className:"fixed bottom-4 right-4 z-50 space-y-2",children:e.map(e=>(0,s.jsx)(h,{toast:e,onDismiss:r},e.id))})}let b={show:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3,s=new CustomEvent("toast",{detail:{id:Math.random().toString(36).substr(2,9),type:e,message:t,duration:r}});window.dispatchEvent(s)},success:(e,t)=>{b.show("success",e,t)},error:(e,t)=>{b.show("error",e,t)},warning:(e,t)=>{b.show("warning",e,t)},info:(e,t)=>{b.show("info",e,t)}}},4992:(e,t,r)=>{Promise.resolve().then(r.bind(r,7161))},7161:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var s=r(5155),a=r(2115),d=r(4304);function l(){let[e,t]=(0,a.useState)([]),[r,l]=(0,a.useState)(!0),[o,n]=(0,a.useState)(!1),[i,c]=(0,a.useState)(""),[u,m]=(0,a.useState)("album"),[h,x]=(0,a.useState)(null),[b,g]=(0,a.useState)(!1),[f,p]=(0,a.useState)(""),[y,w]=(0,a.useState)(""),[j,N]=(0,a.useState)(!1);(0,a.useEffect)(()=>{"true"===localStorage.getItem("admin-authenticated")?(g(!0),v(),k()):l(!1)},[]);let v=async()=>{try{let e=await fetch("/api/admin/all-feeds"),r=await e.json();r.success?t(r.feeds):d.o.error("Failed to load feeds")}catch(e){console.error("Error loading feeds:",e),d.o.error("Error loading feeds")}finally{l(!1)}},k=async()=>{try{let e=await fetch("/api/admin/cdn-status"),t=await e.json();t.success&&x(t.cdnStatus)}catch(e){console.error("Error loading CDN status:",e)}},S=async e=>{if(e.preventDefault(),!i.trim())return void d.o.error("Please enter a RSS feed URL");n(!0);try{let e=await fetch("/api/admin/feeds",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:i.trim(),type:u})}),t=await e.json();if(t.success){try{(await fetch("/api/admin/add-to-hardcoded",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({originalUrl:i.trim(),cdnUrl:t.feed.cdnUrl||i.trim(),type:u})})).ok?d.o.success("Feed added to both managed system and hardcoded list"):d.o.success("Feed added to managed system (hardcode update failed)")}catch(e){console.warn("Failed to add to hardcoded list:",e),d.o.success("Feed added to managed system")}c(""),m("album"),await v()}else d.o.error(t.error||"Failed to add feed")}catch(e){console.error("Error adding feed:",e),d.o.error("Error adding feed")}finally{n(!1)}},C=async(e,t)=>{if("hardcoded"===t)return void d.o.error("Cannot remove hardcoded feeds through admin interface");if(confirm("Are you sure you want to remove this feed?"))try{let t=await fetch("/api/admin/feeds/".concat(e),{method:"DELETE"}),r=await t.json();r.success?(d.o.success("Feed removed successfully"),await v()):d.o.error(r.error||"Failed to remove feed")}catch(e){console.error("Error removing feed:",e),d.o.error("Error removing feed")}},A=async e=>{try{let t=await fetch("/api/admin/feeds/".concat(e,"/refresh"),{method:"POST"}),r=await t.json();r.success?(d.o.success("Feed refreshed successfully"),await v()):d.o.error(r.error||"Failed to refresh feed")}catch(e){console.error("Error refreshing feed:",e),d.o.error("Error refreshing feed")}};return b||r?r?(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 text-white",children:(0,s.jsx)("div",{className:"container mx-auto px-6 py-12",children:(0,s.jsxs)("div",{className:"flex items-center justify-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"}),(0,s.jsx)("span",{className:"ml-4 text-lg",children:"Loading feeds..."})]})})}):(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 text-white",children:(0,s.jsxs)("div",{className:"container mx-auto px-6 py-12",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold",children:"RSS Feed Management"}),(0,s.jsx)("button",{onClick:()=>{g(!1),localStorage.removeItem("admin-authenticated"),p(""),w("")},className:"px-4 py-2 bg-red-600/20 text-red-400 rounded-lg hover:bg-red-600/30 transition-colors text-sm font-medium",title:"Logout",children:"Logout"})]}),(0,s.jsx)("p",{className:"text-gray-400 mb-4",children:"Manage RSS feeds for the music catalog. Feeds are automatically processed and cached to CDN."}),h&&(0,s.jsxs)("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full text-sm ".concat(h.configured?"bg-green-500/20 text-green-400 border border-green-500/30":"bg-yellow-500/20 text-yellow-400 border border-yellow-500/30"),children:[(0,s.jsx)("span",{className:"w-2 h-2 rounded-full bg-current"}),(0,s.jsxs)("span",{children:["CDN: ",h.configured?"Connected":"Not Configured",h.configured&&" (".concat(h.storageZone,")")]})]})]}),(0,s.jsxs)("div",{className:"bg-white/5 backdrop-blur-sm rounded-xl border border-white/10 p-6 mb-8",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Add New RSS Feed"}),(0,s.jsxs)("form",{onSubmit:S,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{htmlFor:"feedUrl",className:"block text-sm font-medium text-gray-300 mb-2",children:"RSS Feed URL"}),(0,s.jsx)("input",{type:"url",id:"feedUrl",value:i,onChange:e=>c(e.target.value),placeholder:"https://example.com/feed.xml",className:"w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:o,required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"feedType",className:"block text-sm font-medium text-gray-300 mb-2",children:"Feed Type"}),(0,s.jsxs)("select",{id:"feedType",value:u,onChange:e=>m(e.target.value),className:"w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:o,children:[(0,s.jsx)("option",{value:"album",children:"Album Feed"}),(0,s.jsx)("option",{value:"publisher",children:"Publisher Feed"})]})]})]}),(0,s.jsx)("button",{type:"submit",disabled:o||!i.trim(),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:o?"Adding Feed...":"Add Feed"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[(0,s.jsxs)("div",{className:"bg-white/5 backdrop-blur-sm rounded-xl border border-white/10 p-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Total Feeds"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-blue-400",children:e.length})]}),(0,s.jsxs)("div",{className:"bg-white/5 backdrop-blur-sm rounded-xl border border-white/10 p-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Built-in"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-blue-400",children:e.filter(e=>"hardcoded"===e.source).length})]}),(0,s.jsxs)("div",{className:"bg-white/5 backdrop-blur-sm rounded-xl border border-white/10 p-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Added"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-green-400",children:e.filter(e=>"managed"===e.source).length})]}),(0,s.jsxs)("div",{className:"bg-white/5 backdrop-blur-sm rounded-xl border border-white/10 p-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Active"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-purple-400",children:e.filter(e=>"active"===e.status).length})]})]}),(0,s.jsxs)("div",{className:"bg-white/5 backdrop-blur-sm rounded-xl border border-white/10 overflow-hidden",children:[(0,s.jsx)("div",{className:"p-6 border-b border-white/10",children:(0,s.jsxs)("h2",{className:"text-2xl font-semibold",children:["Managed Feeds (",e.length,")"]})}),0===e.length?(0,s.jsxs)("div",{className:"p-12 text-center",children:[(0,s.jsx)("p",{className:"text-gray-400 text-lg",children:"No feeds managed yet"}),(0,s.jsx)("p",{className:"text-gray-500 text-sm mt-2",children:"Add your first RSS feed above to get started"})]}):(0,s.jsx)("div",{className:"divide-y divide-white/10",children:e.map(e=>(0,s.jsx)("div",{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,s.jsx)("span",{className:"text-lg",children:(e=>{switch(e){case"active":return"✅";case"processing":return"⏳";case"error":return"❌";case"pending":return"⏸️";default:return"❓"}})(e.status)}),(0,s.jsx)("span",{className:"text-sm font-medium ".concat((e=>{switch(e){case"active":return"text-green-400";case"processing":return"text-yellow-400";case"error":return"text-red-400";case"pending":return"text-blue-400";default:return"text-gray-400"}})(e.status)),children:e.status.toUpperCase()}),(0,s.jsx)("span",{className:"text-xs bg-white/10 px-2 py-1 rounded",children:e.type}),(0,s.jsx)("span",{className:"text-xs px-2 py-1 rounded ".concat("hardcoded"===e.source?"bg-blue-600/80 text-blue-100":"bg-green-600/80 text-green-100"),children:"hardcoded"===e.source?"Built-in":"Added"})]}),e.title&&(0,s.jsxs)("h3",{className:"text-lg font-semibold mb-1",children:[e.title," ",e.artist&&"by ".concat(e.artist)]}),(0,s.jsx)("p",{className:"text-gray-400 text-sm break-all mb-2",children:e.originalUrl}),e.cdnUrl&&(0,s.jsxs)("p",{className:"text-blue-400 text-sm break-all mb-2",children:["CDN: ",e.cdnUrl]}),(0,s.jsxs)("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[(0,s.jsxs)("span",{children:["Added: ",new Date(e.addedAt).toLocaleString()]}),e.lastFetched&&(0,s.jsxs)("span",{children:["Last fetched: ",new Date(e.lastFetched).toLocaleString()]}),e.albumCount&&(0,s.jsxs)("span",{children:["Albums: ",e.albumCount]})]}),e.lastError&&(0,s.jsxs)("p",{className:"text-red-400 text-sm mt-2 bg-red-500/10 p-2 rounded",children:["Error: ",e.lastError]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 ml-4",children:[(0,s.jsx)("button",{onClick:()=>A(e.id),disabled:"hardcoded"===e.source,className:"px-3 py-1 rounded transition-colors text-sm ".concat("hardcoded"===e.source?"bg-gray-600/20 text-gray-500 cursor-not-allowed":"bg-blue-600/20 text-blue-400 hover:bg-blue-600/30"),title:"hardcoded"===e.source?"Cannot refresh hardcoded feeds":"Refresh feed",children:"\uD83D\uDD04"}),(0,s.jsx)("button",{onClick:()=>C(e.id,e.source||"managed"),disabled:"hardcoded"===e.source,className:"px-3 py-1 rounded transition-colors text-sm ".concat("hardcoded"===e.source?"bg-gray-600/20 text-gray-500 cursor-not-allowed":"bg-red-600/20 text-red-400 hover:bg-red-600/30"),title:"hardcoded"===e.source?"Cannot remove hardcoded feeds":"Remove feed",children:"\uD83D\uDDD1️"})]})]})},e.id))})]})]})}):(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 text-white flex items-center justify-center",children:(0,s.jsxs)("div",{className:"bg-white/5 backdrop-blur-sm rounded-xl border border-white/10 p-8 w-full max-w-md",children:[(0,s.jsxs)("div",{className:"text-center mb-6",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Admin Access"}),(0,s.jsx)("p",{className:"text-gray-400",children:"Enter passphrase to access RSS feed management"})]}),(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),"doerfel"===f.trim().toLowerCase()?(g(!0),w(""),localStorage.setItem("admin-authenticated","true"),v(),k()):(w("Incorrect passphrase. Please try again."),p(""))},className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"passphrase",className:"block text-sm font-medium text-gray-300 mb-2",children:"Passphrase"}),(0,s.jsx)("input",{type:"password",id:"passphrase",value:f,onChange:e=>{p(e.target.value),y&&w("")},placeholder:"Enter admin passphrase",className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",autoFocus:!0,required:!0}),y&&(0,s.jsx)("p",{className:"mt-2 text-sm text-red-400",children:y})]}),(0,s.jsx)("button",{type:"submit",disabled:!f.trim(),className:"w-full px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",children:"Access Admin Panel"})]})]})})}},8533:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(2895).A)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])}},e=>{e.O(0,[8441,5964,7358],()=>e(e.s=4992)),_N_E=e.O()}]);