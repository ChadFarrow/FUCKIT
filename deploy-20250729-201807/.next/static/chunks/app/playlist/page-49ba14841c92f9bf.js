(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8137],{4137:(e,t,l)=>{Promise.resolve().then(l.bind(l,5688))},5688:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>u});var r=l(5155),s=l(2115),a=l(5695),i=l(6874),c=l.n(i),o=l(6766),n=l(8984),d=l(4188),h=l(4304),x=l(8959);function m(){let e=(0,a.useSearchParams)().get("feedId"),[t,l]=(0,s.useState)(null),[i,m]=(0,s.useState)(!0),[u,p]=(0,s.useState)(0),{playAlbum:g,currentPlayingAlbum:b,isPlaying:f,pause:j,resume:v,currentTrackIndex:y}=(0,n.G)();(0,s.useEffect)(()=>{N()},[e]);let N=async()=>{try{m(!0);let t=e?"/api/playlist?format=json&feedId=".concat(e):"/api/playlist?format=json",r=await fetch(t);if(!r.ok)throw Error("Failed to load playlist");let s=await r.json();l(s)}catch(e){console.error("Error loading playlist:",e),h.o.error("Failed to load playlist")}finally{m(!1)}},w=async(e,l)=>{p(l);let r={id:e.feedId,title:e.albumTitle,artist:e.albumArtist,description:"Playlist track from ".concat(e.albumTitle),coverArt:e.albumCoverArt||e.image||"",releaseDate:new Date().toISOString(),tracks:(null==t?void 0:t.tracks.map(e=>({title:e.title,duration:e.duration,url:e.url,trackNumber:e.globalTrackNumber,subtitle:e.subtitle,summary:e.summary,image:e.image,explicit:e.explicit,keywords:e.keywords})))||[]};try{await g(r,l)}catch(e){console.error("Error playing track:",e),h.o.error("Failed to play track")}};return i?(0,r.jsx)("div",{className:"min-h-screen bg-black text-white flex items-center justify-center",children:(0,r.jsx)(d.A,{size:"large",text:"Loading playlist..."})}):t?(0,r.jsxs)("div",{className:"min-h-screen bg-black text-white",children:[(0,r.jsx)("header",{className:"border-b backdrop-blur-sm bg-black/30 pt-safe-plus pt-12",style:{borderColor:"rgba(255, 255, 255, 0.1)"},children:(0,r.jsx)("div",{className:"container mx-auto px-6 py-4",children:(0,r.jsx)("div",{className:"flex items-center gap-4 mb-4",children:(0,r.jsxs)(c(),{href:"/",className:"flex items-center gap-4 hover:opacity-80 transition-opacity",children:[(0,r.jsx)("div",{className:"w-10 h-10 relative border border-gray-700 rounded-lg overflow-hidden",children:(0,r.jsx)(o.default,{src:"/logo.webp",alt:"VALUE Logo",width:40,height:40,className:"object-cover",priority:!0})}),(0,r.jsx)("h1",{className:"text-2xl font-bold",children:"Project StableKraft"})]})})})}),(0,r.jsxs)("div",{className:"container mx-auto px-6 py-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h1",{className:"text-4xl font-bold mb-2",children:t.title}),(0,r.jsx)("p",{className:"text-gray-400 mb-4",children:t.description}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-4 mb-6",children:[(0,r.jsxs)("button",{onClick:()=>{if(!t)return;let e=[...t.tracks];for(let t=e.length-1;t>0;t--){let l=Math.floor(Math.random()*(t+1));[e[t],e[l]]=[e[l],e[t]]}l({...t,tracks:e}),h.o.success("Playlist shuffled!")},className:"flex items-center gap-2 bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-lg transition-colors font-medium",children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{d:"M10.59 9.17L5.41 4 4 5.41l5.17 5.17 1.42-1.41zM14.5 4l2.04 2.04L4 18.59 5.41 20 17.96 7.46 20 9.5V4h-5.5zm.33 9.41l-1.41 1.41 3.13 3.13L14.5 20H20v-5.5l-2.04 2.04-3.13-3.13z"})}),"Shuffle"]}),(0,r.jsxs)("button",{onClick:()=>t.tracks.length>0&&w(t.tracks[0],0),className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg transition-colors font-medium",children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{d:"M8 5v14l11-7z"})}),"Play All"]}),(0,r.jsxs)("button",{onClick:()=>{let t=e?"".concat(window.location.origin,"/api/playlist?feedId=").concat(e):"".concat(window.location.origin,"/api/playlist");navigator.clipboard.writeText(t),h.o.success("RSS feed URL copied to clipboard!")},className:"flex items-center gap-2 bg-gray-700 hover:bg-gray-600 text-white px-6 py-3 rounded-lg transition-colors font-medium",children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{d:"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"})}),"Copy RSS Feed"]})]}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:[t.totalTracks," tracks • Podcasting 2.0 musicL playlist"]})]}),(0,r.jsx)("div",{className:"space-y-2 pb-32",children:t.tracks.map((e,t)=>{var l;let s=b&&(null==(l=b.tracks[y])?void 0:l.url)===e.url;return(0,r.jsxs)("div",{className:"group flex items-center gap-4 p-4 rounded-lg transition-all cursor-pointer ".concat(s?"bg-purple-900/30 border border-purple-500/30":"bg-gray-900/30 hover:bg-gray-800/50"),onClick:()=>w(e,t),children:[(0,r.jsxs)("div",{className:"w-10 h-10 flex items-center justify-center text-gray-400",children:[s&&f?(0,r.jsx)("svg",{className:"w-6 h-6 text-purple-400 animate-pulse",fill:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 14.5v-9l6 4.5-6 4.5z"})}):(0,r.jsx)("span",{className:"group-hover:hidden",children:t+1}),(0,r.jsx)("svg",{className:"w-6 h-6 hidden group-hover:block ".concat(s?"text-purple-400":""),fill:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{d:"M8 5v14l11-7z"})})]}),(0,r.jsx)("div",{className:"w-12 h-12 flex-shrink-0",children:(0,r.jsx)(x.A,{src:e.image||e.albumCoverArt||"",alt:e.title,width:64,height:64,className:"w-full h-full object-cover rounded"})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("h3",{className:"font-medium truncate ".concat(s?"text-purple-300":"text-white"),children:e.title}),(0,r.jsxs)("p",{className:"text-sm text-gray-400 truncate",children:[e.albumArtist," • ",e.albumTitle]})]}),(0,r.jsx)("div",{className:"text-sm text-gray-400",children:e.duration})]},"".concat(e.feedId,"-").concat(e.globalTrackNumber))})})]})]}):(0,r.jsx)("div",{className:"min-h-screen bg-black text-white flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Playlist not found"}),(0,r.jsx)(c(),{href:"/",className:"text-blue-400 hover:text-blue-300 underline",children:"Return to home"})]})})}function u(){return(0,r.jsx)(s.Suspense,{fallback:(0,r.jsx)(d.A,{}),children:(0,r.jsx)(m,{})})}}},e=>{e.O(0,[9910,6874,6766,8984,4428,8441,5964,7358],()=>e(e.s=4137)),_N_E=e.O()}]);