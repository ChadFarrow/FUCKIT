(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9049],{995:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a});var r=i(5155),s=i(2115),n=i(8959);function l(e){let{src:t,alt:i}=e,[l,a]=(0,s.useState)(!1),[o,d]=(0,s.useState)(""),[c,u]=(0,s.useState)({width:0,height:0}),[h,m]=(0,s.useState)("loading"),[g,f]=(0,s.useState)("");return(0,s.useEffect)(()=>{let e=()=>{let e=window.innerWidth,t=window.innerHeight,i=navigator.userAgent;a(e<=768),d(i),u({width:e,height:t}),console.log("\uD83D\uDCF1 Mobile Debug Info:",{isMobile:e<=768,width:e,height:t,userAgent:i,platform:navigator.platform,vendor:navigator.vendor})};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,r.jsxs)("div",{className:"border-2 border-red-500 p-2 m-2",children:[(0,r.jsx)("h3",{className:"text-red-500 font-bold",children:"Mobile Debug Component"}),(0,r.jsxs)("div",{className:"text-xs text-gray-400 mb-2",children:[(0,r.jsxs)("div",{children:["Mobile: ",l?"Yes":"No"]}),(0,r.jsxs)("div",{children:["Screen: ",c.width,"x",c.height]}),(0,r.jsxs)("div",{children:["User Agent: ",o.substring(0,50),"..."]}),(0,r.jsxs)("div",{children:["Image URL: ",t]}),(0,r.jsxs)("div",{children:["Status: ",h]}),g&&(0,r.jsxs)("div",{children:["Error: ",g]})]}),(0,r.jsx)(n.A,{src:t,alt:i,width:200,height:200,className:"w-full h-48 object-cover",onLoad:()=>{console.log("✅ Mobile image loaded successfully:",t),m("success")},onError:()=>{console.error("❌ Mobile image failed to load:",t),m("error"),f("Image failed to load")},priority:!0})]})}function a(){let[e,t]=(0,s.useState)(!1),[i,a]=(0,s.useState)(""),[o,d]=(0,s.useState)(!0),[c,u]=(0,s.useState)(!1);return((0,s.useEffect)(()=>{let e=()=>{let e=window.innerWidth,i=navigator.userAgent;t(e<=768),a(i)},i=()=>{d(navigator.onLine)},r=async()=>{if("serviceWorker"in navigator){let e=await navigator.serviceWorker.getRegistration();u(!!(null==e?void 0:e.active))}};return e(),i(),r(),window.addEventListener("resize",e),window.addEventListener("online",i),window.addEventListener("offline",i),()=>{window.removeEventListener("resize",e),window.removeEventListener("online",i),window.removeEventListener("offline",i)}},[]),o)?(0,r.jsxs)("div",{className:"min-h-screen bg-gray-900 text-white p-4",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Mobile Image Loading Test"}),(0,r.jsxs)("div",{className:"bg-gray-800 p-4 rounded mb-4",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"Device Information"}),(0,r.jsxs)("div",{className:"text-sm space-y-1",children:[(0,r.jsxs)("div",{children:["Mobile: ",e?"Yes":"No"]}),(0,r.jsxs)("div",{children:["Screen Width: ",window.innerWidth]}),(0,r.jsxs)("div",{children:["User Agent: ",i.substring(0,100),"..."]}),(0,r.jsxs)("div",{children:["Platform: ","undefined"!=typeof navigator?navigator.platform:"Unknown"]}),(0,r.jsxs)("div",{children:["Vendor: ","undefined"!=typeof navigator?navigator.vendor:"Unknown"]}),(0,r.jsxs)("div",{children:["Online: ",o?"Yes":"No"]}),(0,r.jsxs)("div",{children:["Service Worker Active: ",c?"Yes":"No"]})]})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[{src:"https://www.doerfelverse.com/wp-content/uploads/2024/01/you-are-my-world.gif",alt:"Test Image 1 - Doerfelverse"},{src:"https://re.podtards.com/api/optimized-images/you-are-my-world.gif",alt:"Test Image 2 - Optimized"},{src:"https://www.wavlake.com/artwork/123456.jpg",alt:"Test Image 3 - Wavlake"},{src:"https://f4.bcbits.com/img/a1234567890_10.jpg",alt:"Test Image 4 - Bandcamp"}].map((e,t)=>(0,r.jsxs)("div",{className:"bg-gray-800 p-4 rounded",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold mb-2",children:["Test Image ",t+1]}),(0,r.jsx)("p",{className:"text-sm text-gray-400 mb-2",children:e.alt}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mb-4 break-all",children:e.src}),(0,r.jsx)(l,{src:e.src,alt:e.alt}),(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsx)("h4",{className:"text-sm font-semibold mb-2",children:"Regular CDNImage Component:"}),(0,r.jsx)(n.A,{src:e.src,alt:e.alt,width:200,height:200,className:"w-full h-48 object-cover rounded",priority:!0})]})]},t))}),(0,r.jsxs)("div",{className:"mt-8 bg-gray-800 p-4 rounded",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"Instructions"}),(0,r.jsxs)("ul",{className:"text-sm space-y-1",children:[(0,r.jsx)("li",{children:"• Open browser developer tools"}),(0,r.jsx)("li",{children:"• Check the Console tab for debug messages"}),(0,r.jsx)("li",{children:"• Check the Network tab for failed image requests"}),(0,r.jsx)("li",{children:"• Test on different mobile devices/browsers"}),(0,r.jsx)("li",{children:"• Look for CORS errors or timeout issues"}),(0,r.jsx)("li",{children:"• If you see 'offline', check your internet connection"})]})]}),(0,r.jsxs)("div",{className:"mt-4 bg-yellow-900/20 border border-yellow-600 p-4 rounded",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-2 text-yellow-400",children:"Troubleshooting"}),(0,r.jsx)("p",{className:"text-sm text-yellow-200 mb-2",children:'If you\'re seeing "offline" instead of this page:'}),(0,r.jsxs)("ul",{className:"text-sm text-yellow-200 space-y-1",children:[(0,r.jsx)("li",{children:"• Check your internet connection"}),(0,r.jsx)("li",{children:"• Try refreshing the page"}),(0,r.jsx)("li",{children:"• Clear browser cache and reload"}),(0,r.jsx)("li",{children:"• Disable service worker temporarily in dev tools"})]})]})]}):(0,r.jsx)("div",{className:"min-h-screen bg-gray-900 text-white p-4 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"You're Offline"}),(0,r.jsx)("p",{className:"text-gray-400 mb-4",children:"This test page requires an internet connection."}),(0,r.jsx)("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded",children:"Retry"})]})})}},3825:(e,t,i)=>{Promise.resolve().then(i.bind(i,995))},6654:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useMergedRef",{enumerable:!0,get:function(){return s}});let r=i(2115);function s(e,t){let i=(0,r.useRef)(null),s=(0,r.useRef)(null);return(0,r.useCallback)(r=>{if(null===r){let e=i.current;e&&(i.current=null,e());let t=s.current;t&&(s.current=null,t())}else e&&(i.current=n(e,r)),t&&(s.current=n(t,r))},[e,t])}function n(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let i=e(t);return"function"==typeof i?i:()=>e(null)}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},8959:(e,t,i)=>{"use strict";i.d(t,{A:()=>l});var r=i(5155),s=i(6766),n=i(2115);function l(e){let{src:t,alt:i,width:l,height:a,className:o,priority:d=!1,quality:c=85,onError:u,onLoad:h,fallbackSrc:m,sizes:g,placeholder:f="empty",...p}=e,[x,w]=(0,n.useState)(!0),[v,b]=(0,n.useState)(!1),[j,y]=(0,n.useState)(t),[N,S]=(0,n.useState)(0),[k,E]=(0,n.useState)(null),[I,C]=(0,n.useState)(!1),[L,T]=(0,n.useState)(!1),[z,M]=(0,n.useState)(!1),O=(0,n.useRef)(null),[_,A]=(0,n.useState)(!1),[R,W]=(0,n.useState)(!1),[D,U]=(0,n.useState)(!1),[P,Y]=(0,n.useState)("");(0,n.useEffect)(()=>{C(t.toLowerCase().includes(".gif")||j.toLowerCase().includes(".gif"))},[t,j]),(0,n.useEffect)(()=>{U(!0);let e=()=>{let e=window.innerWidth,t=navigator.userAgent;A(e<=768),W(e>768&&e<=1024),Y(t)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,n.useEffect)(()=>{if(!I||!D||d)return void T(!0);let e=new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting&&(T(!0),e.disconnect())})},{rootMargin:"50px",threshold:.1});return O.current&&e.observe(O.current),()=>e.disconnect()},[I,D,d]);let q=(e,t,i)=>{if(e.includes("/api/optimized-images/"))return e;let r=["you-are-my-world.gif","HowBoutYou.gif","autumn.gif","WIldandfreecover-copy-2.png","alandace.gif","doerfel-verse-idea-9.png","SatoshiStreamer-track-1-album-art.png","dvep15-art.png","disco-swag.png","first-christmas-art.jpg","let-go-art.png"],s=e.split("/").pop();if(s&&r.some(e=>s.includes(e.replace(/\.(png|jpg|gif)$/,"")))){let e=r.find(e=>s.includes(e.replace(/\.(png|jpg|gif)$/,"")));if(e){let r="https://re.podtards.com/api/optimized-images/".concat(e);if(t||i){let e=new URLSearchParams;t&&e.set("w",t.toString()),i&&e.set("h",i.toString()),e.set("q",c.toString()),window.navigator.userAgent.includes("Chrome")&&!I&&e.set("f","webp"),r+="?".concat(e.toString())}return r}}return e},F=()=>{if(l&&a)return{width:l,height:a};if(I)if(_)return{width:200,height:200};else if(R)return{width:300,height:300};else return{width:400,height:400};return _?{width:300,height:300}:R?{width:400,height:400}:{width:500,height:500}},B=()=>{if(w(!1),k&&(clearTimeout(k),E(null)),0===N&&m&&m!==j){y(m),b(!1),w(!0),S(1),E(setTimeout(()=>{B()},I?8e3:1e4));return}if(0===N&&m===j){S(1),B();return}if(1===N&&!j.includes("/api/")){y("/api/proxy-image?url=".concat(encodeURIComponent(j))),b(!1),w(!0),S(2),E(setTimeout(()=>{B()},I?1e4:12e3));return}if(2===N&&j.includes("/api/optimized-images/")){let e=(e=>{if(e.includes("/api/optimized-images/")){var t;null==(t=e.split("/").pop())||t.split("?")[0]}return m||e})(j);if(e&&e!==j){y(e),b(!1),w(!0),S(3),E(setTimeout(()=>{B()},I?12e3:15e3));return}}b(!0),null==u||u()},H=()=>{w(!1),b(!1),M(!0),k&&(clearTimeout(k),E(null)),null==h||h()};(0,n.useEffect)(()=>{let e=F();return y(D&&_?!t||t.includes("re.podtards.com")||t.includes("/api/")?q(t,e.width,e.height):"/api/proxy-image?url=".concat(encodeURIComponent(t)):q(t,e.width,e.height)),w(!0),b(!1),S(0),M(!1),k&&(clearTimeout(k),E(null)),()=>{k&&clearTimeout(k)}},[t,l,a,D]),(0,n.useEffect)(()=>{_&&D&&x&&!k&&E(setTimeout(()=>{B()},I?12e3:15e3))},[D,x,k,I]);let $=F();return(0,r.jsxs)("div",{className:"relative ".concat(o||""),ref:O,children:[x&&(0,r.jsxs)("div",{className:"absolute inset-0 bg-gray-800/50 animate-pulse rounded flex items-center justify-center",children:[(0,r.jsx)("div",{className:"w-6 h-6 bg-white/20 rounded-full animate-spin"}),I&&(0,r.jsx)("div",{className:"absolute bottom-1 right-1 bg-black/50 text-white text-xs px-1 py-0.5 rounded",children:"\uD83C\uDFAC GIF"})]}),v&&(0,r.jsx)("div",{className:"absolute inset-0 bg-gray-800/50 rounded flex items-center justify-center",children:(0,r.jsx)("div",{className:"text-white/60 text-sm",children:"Image unavailable"})}),D&&_?(0,r.jsx)("img",{src:L?j:"",alt:i,width:$.width,height:$.height,className:"".concat(x?"opacity-0":"opacity-100"," transition-opacity duration-300 ").concat(o||""),onError:e=>{B()},onLoad:e=>{H()},loading:d?"eager":"lazy",referrerPolicy:"no-referrer",crossOrigin:"anonymous",style:{objectFit:"cover",width:"100%",height:"100%",display:"block"},...p}):(0,r.jsx)(s.default,{src:L?j:"",alt:i,width:$.width,height:$.height,className:"".concat(x?"opacity-0":"opacity-100"," transition-opacity duration-300"),priority:d,quality:c,sizes:(()=>{if(g)return g;if(I)if(_)return"(max-width: 768px) 200px, (max-width: 1024px) 300px, 400px";else if(R)return"(max-width: 1024px) 300px, 400px";else return"(max-width: 768px) 200px, (max-width: 1024px) 300px, 400px";return _?"(max-width: 768px) 100vw, (max-width: 1024px) 50vw, 33vw":R?"(max-width: 1024px) 50vw, 33vw":"(max-width: 768px) 100vw, (max-width: 1024px) 50vw, 33vw"})(),onError:B,onLoad:H,placeholder:f,unoptimized:j.includes("/api/optimized-images/"),...p}),!1]})}}},e=>{e.O(0,[6766,8441,5964,7358],()=>e(e.s=3825)),_N_E=e.O()}]);